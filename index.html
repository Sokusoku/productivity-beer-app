<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speed Reader Pro</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- === PAGE 0: INTRO / PREVIEW (Tutorial Mode) === -->
    <div id="page-intro">
        
        <div class="reader-top-bar">
            <!-- Tooltip: Sound -->
            <div id="tip-sound" class="tutorial-tooltip tip-below" style="right: 15px; top: 70px;">
                Audio cues enabled
            </div>
            
            <!-- Removed Redundant X Button here -->
            <button class="btn-icon" style="margin-left: auto;">üîä</button>
        </div>

        <div class="reader-main">
            <!-- Focus Tooltip -->
            <div id="tip-focus" class="tutorial-tooltip tip-above" style="top: 35%; left: 0; right: 0; margin: auto; width: fit-content;">
                Focus on the Red Letter
            </div>

            <div class="guide-notch-top"></div>
            <div class="word-display" id="introDisplay">
                <span class="segment left" id="iLeft">Welcome</span>
                <span class="segment pivot" id="iPivot"></span>
                <span class="segment right" id="iRight"></span>
            </div>
            <div class="guide-notch-bottom"></div>
        </div>

        <div class="reader-footer">
            <div class="progress-text">Tutorial Mode</div>
            
            <!-- Controls Wrapper for Positioning Tooltips -->
            <div style="position: relative; margin-bottom: 10px;">
                <!-- Control Tooltips -->
                <div id="tip-slower" class="tutorial-tooltip tip-above" style="left: -10px; bottom: 70px;">
                    Decrease Speed
                </div>
                
                <div id="tip-reset" class="tutorial-tooltip tip-above" style="left: 25%; bottom: 70px;">
                    Reset Reader
                </div>

                <div id="tip-play" class="tutorial-tooltip tip-above" style="left: 50%; transform: translateX(-50%); bottom: 80px;">
                    Click Play/Pause
                </div>

                <div id="tip-faster" class="tutorial-tooltip tip-above" style="right: -10px; bottom: 70px;">
                    Increase Speed
                </div>

                <!-- Actual Controls -->
                <div class="control-panel">
                    <button id="iBtnSlower" class="btn-circle">‚àí</button>
                    <button id="iBtnReset" class="btn-circle">‚èÆ</button>
                    <button id="iBtnPlay" class="btn-circle play">‚ñ∂</button>
                    <button id="iBtnFaster" class="btn-circle">+</button>
                </div>
            </div>

            <div id="introWpmDisplay" class="speed-text">200 WPM</div>
            
            <div class="intro-footer-actions">
                <button id="btnEnterApp" class="primary-btn" disabled>Start Reading Now</button>
                <button id="btnSkipTutorial" class="btn-skip">Skip Tutorial ‚ü´</button>
            </div>
        </div>
    </div>

    <!-- === PAGE 1: HOME (Hidden by default) === -->
    <div id="page-home" class="hidden">
        <div class="scroll-container">
            <div class="home-header">
                <h1>Speed<span class="logo-red">R</span>eader</h1>
                <div class="header-actions">
                    <button id="btnGoToTutorial" class="help-icon" title="Replay Tutorial">‚ùì</button>
                    <button id="btnOpenSettings" class="gear-icon" title="Settings">‚öôÔ∏è</button>
                </div>
            </div>

            <div class="home-content">
                
                <div class="section-title">Library</div>
                <div class="card">
                    <div class="subsection-label">Select Story</div>
                    <select id="storySelect">
                        <option value="" disabled selected>Loading Library...</option>
                    </select>

                    <div class="subsection-label">
                        <span>Tone Variant</span>
                    </div>
                    <div class="options-grid" id="toneSelector">
                        <button class="option-btn" data-val="spicier">Spicier üå∂Ô∏è</button>
                        <button class="option-btn selected" data-val="happy">Happy üôÇ</button>
                        <button class="option-btn" data-val="sad">Sad üò¢</button>
                    </div>

                    <div class="subsection-label">
                        <span>Length Version</span>
                    </div>
                    <div class="options-grid" id="lengthSelector">
                        <button class="option-btn selected" data-val="short">Short (500)</button>
                        <button class="option-btn" data-val="medium">Medium (1k)</button>
                        <button class="option-btn" data-val="long">Long (5k)</button>
                    </div>

                    <div class="subsection-label">
                        <span>Summary</span>
                        <span id="wordCountDisplay" style="color: var(--text-red);">Words: 0</span>
                    </div>
                    <div id="staticSummary" class="summary-box">
                        Select a story to view summary.
                    </div>
                </div>

                <button id="btnStartReading" class="primary-btn">Start Reading</button>
            </div>
        </div>
    </div>

    <!-- === PAGE 2: READER === -->
    <div id="page-reader" class="hidden">
        <div class="reader-top-bar">
            <button id="btnCloseReader" class="btn-icon" title="Back to Home">‚úï</button>
            <button id="btnSoundToggle" class="btn-icon" title="Toggle Sound">üîä</button>
        </div>

        <div class="reader-main">
            <div class="guide-notch-top"></div>
            <div class="word-display" id="readerDisplay">
                <span class="segment left" id="txtLeft">Ready</span>
                <span class="segment pivot" id="txtPivot">?</span>
                <span class="segment right" id="txtRight"></span>
            </div>
            <div class="guide-notch-bottom"></div>
        </div>

        <div class="reader-footer">
            <div class="progress-text" id="progressDisplay">0 / 0</div>
            <div class="control-panel">
                <button id="btnSlower" class="btn-circle" title="Slower (‚àí25 WPM)">‚àí</button>
                <button id="btnRewind" class="btn-circle" title="Reset">‚èÆ</button>
                <button id="btnPlayPause" class="btn-circle play" title="Play/Pause">‚ñ∂</button>
                <button id="btnFaster" class="btn-circle" title="Faster (+25 WPM)">+</button>
            </div>
            <div class="speed-text" id="wpmDisplay">300 WPM</div>
        </div>
    </div>

    <!-- === PAGE 3: SETTINGS === -->
    <div id="page-settings" class="hidden">
        <div class="settings-header">
            <h2>Settings</h2>
            <button id="btnCloseSettingsX" class="btn-icon">‚úï</button>
        </div>
        
        <div class="settings-content">
            <div class="setting-group">
                <label class="setting-label">Font & Size</label>
                <select id="setFontFamily" style="margin-bottom: 10px;">
                    <option value="'Courier New', Courier, monospace">Courier New (Default)</option>
                    <option value="Arial, sans-serif">Arial</option>
                    <option value="'Times New Roman', Times, serif">Times New Roman</option>
                    <option value="Verdana, sans-serif">Verdana</option>
                    <option value="Georgia, serif">Georgia</option>
                </select>
                
                <div style="display:flex; gap:10px; align-items:center;">
                    <span style="color:#888;">Size:</span>
                    <input type="range" id="setFontSize" min="2" max="6" step="0.5" value="4">
                    <span id="fontSizeDisplay" style="color:#fff; width:40px;">4rem</span>
                </div>
            </div>

            <div class="setting-group">
                <label class="setting-label">Live Preview</label>
                <div class="preview-box">
                    <div class="guide-notch-top" style="height:5px; top:10px;"></div>
                    <div class="word-display" id="previewDisplay">
                        <span class="segment left" id="pLeft"></span>
                        <span class="segment pivot" id="pPivot"></span>
                        <span class="segment right" id="pRight"></span>
                    </div>
                    <div class="guide-notch-bottom" style="height:5px; bottom:10px;"></div>
                </div>
                <div style="font-size:0.8rem; color:#666; text-align:center;">Updates automatically</div>
            </div>

            <div class="setting-group">
                <label class="setting-label">Sound Mapping</label>
                <div class="sound-row">
                    <span class="sound-label">Comma ( , )</span>
                    <select class="sound-select" data-punc="comma">
                        <option value="sine">Beep (Sine)</option>
                        <option value="triangle">Chime (Triangle)</option>
                        <option value="sawtooth">Buzz (Sawtooth)</option>
                        <option value="noise">Click (Noise)</option>
                    </select>
                </div>
                <div class="sound-row">
                    <span class="sound-label">Period ( . )</span>
                    <select class="sound-select" data-punc="period">
                        <option value="sawtooth" selected>Buzz (Sawtooth)</option>
                        <option value="sine">Beep (Sine)</option>
                        <option value="square">8-bit (Square)</option>
                        <option value="noise">Click (Noise)</option>
                    </select>
                </div>
                <div class="sound-row">
                    <span class="sound-label">Exclamation ( ! )</span>
                    <select class="sound-select" data-punc="exclamation">
                        <option value="noise" selected>Whoosh (Noise)</option>
                        <option value="square">Alarm (Square)</option>
                        <option value="triangle">Ding (Triangle)</option>
                    </select>
                </div>
                <div class="sound-row">
                    <span class="sound-label">Question ( ? )</span>
                    <select class="sound-select" data-punc="question">
                        <option value="triangle" selected>Bling (Triangle)</option>
                        <option value="sine">Beep (Sine)</option>
                        <option value="slide">Slide Up</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="settings-footer">
            <button id="btnResetSettings" class="btn-secondary">Reset Defaults</button>
            <button id="btnSaveSettings" class="btn-save">Save Changes</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
